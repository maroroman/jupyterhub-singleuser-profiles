(this["webpackJsonpjupyterhub-singleuser-profiles-ui"]=this["webpackJsonpjupyterhub-singleuser-profiles-ui"]||[]).push([[0],{59:function(e,t,a){e.exports=a(74)},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),s=(a(64),a(65),{_USERNAME:"mroman",_IMAGE:""}),l=a(17),c=a(18),u=a(23),m=a(21),h=a(16),p=a(11),d=a(29),f=a(53),v=a(10),g=a(42),E=a(13),y=(a(66),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).CustomToggle=r.a.forwardRef((function(e,t){var a=e.children,n=e.onClick;return r.a.createElement("a",{ref:t,onClick:function(e){e.preventDefault(),n(e)}},r.a.createElement(E.a,{className:"SizesForm",variant:"light"},r.a.createElement("div",{className:"SizeGrid"},a,r.a.createElement("p",{className:"DropdownRight"},"\u25bc"))))})),n.state={userCM:"",sizeList:[],selectedValue:"",sizeDesc:""},n}return Object(c.a)(a,[{key:"updateConfigmap",value:function(){var e=this;fetch("/api/user/"+this.props.username+"/configmap",{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch user cm")})).then((function(t){e.setState({userCM:t})}))}},{key:"updateSizes",value:function(){var e=this;fetch("/api/sizes",{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Unknown error.")})).then((function(t){e.setState({sizeList:t})}))}},{key:"generateSizeDesc",value:function(e){var t=this,a=e.target.text,n={},o="";fetch("api/size/"+a,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Unknown error.")})).then((function(e){n=e,o=r.a.createElement("p",null,"Size name: ",n.name," ",r.a.createElement("br",null),"Limits: CPU: ",n.resources.limits.cpu," Memory: ",n.resources.limits.memory," ",r.a.createElement("br",null),"Requests: CPU: ",n.resources.requests.cpu," Memory: ",n.resources.requests.memory," ",r.a.createElement("br",null)),t.setState({sizeDesc:o},console.log(t.state.sizeDesc))}))}},{key:"waitForLoad",value:function(e){var t=r.a.createElement("p",null,"Loading...");this.setState({sizeDesc:t},console.log("loading size desc"))}},{key:"componentDidMount",value:function(){this.updateConfigmap(),this.updateSizes()}},{key:"componentDidUpdate",value:function(){this.updateSizes()}},{key:"postChange",value:function(e){var t=JSON.stringify({last_selected_size:e.target.text});fetch("/api/user/"+this.props.username+"/configmap",{method:"POST",body:t,headers:{"Content-Type":"application/json"}}),console.log("Size sent: ",t),this.updateConfigmap()}},{key:"DropdownValue",value:function(){return null!=this.state.selectedValue&&""!=this.state.selectedValue?this.state.selectedValue:"Default"}},{key:"render",value:function(){var e=this;return this.state.selectedValue=this.state.userCM.last_selected_size,r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,{as:g.a},r.a.createElement(v.a.Toggle,{as:this.CustomToggle,id:"dropdown-custom-1"},this.DropdownValue()),r.a.createElement(v.a.Menu,{className:"SizesMenu"},r.a.createElement(f.a,{trigger:"hover",placement:"right",rootClose:"true",overlay:r.a.createElement(d.a,{id:"popover-basic"},r.a.createElement(d.a.Title,{as:"h3"},"Size: Default"),r.a.createElement(d.a.Content,null,r.a.createElement("p",null,"Resources will be set based on profiles configured by administrator")))},r.a.createElement(v.a.Item,{onMouseLeave:function(t){return e.waitForLoad(t)},onClick:function(t){return e.postChange(t)},eventKey:this.state.sizeList.length+1},"Default")),this.state.sizeList.map((function(t,a){return r.a.createElement(f.a,{trigger:"hover",placement:"right",rootClose:"true",overlay:r.a.createElement(d.a,{id:"popover-basic"},r.a.createElement(d.a.Title,{as:"h3"},"Size: ",t),r.a.createElement(d.a.Content,null,e.state.sizeDesc))},r.a.createElement(v.a.Item,{onMouseEnter:function(t){return e.generateSizeDesc(t)},onMouseLeave:function(t){return e.waitForLoad(t)},onClick:function(t){return e.postChange(t)},eventKey:a.toString()},t))}))))," ")))}}]),a}(r.a.Component)),k=(a(70),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).CustomToggle=r.a.forwardRef((function(e,t){var a=e.children,n=e.onClick;return r.a.createElement("a",{ref:t,onClick:function(e){e.preventDefault(),n(e)}},r.a.createElement(E.a,{className:"ImageForm",variant:"light"},r.a.createElement("div",{className:"ImageGrid"},a,r.a.createElement("p",{className:"DropdownRight"},"\u25bc"))))})),n.state={imageList:[],selectedValue:""},n}return Object(c.a)(a,[{key:"updateConfigmap",value:function(){var e=this;fetch("/api/user/"+this.props.username+"/configmap",{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch user cm")})).then((function(t){e.setState({selectedValue:t.last_selected_image})}))}},{key:"updateImages",value:function(){var e=this;fetch("/api/images",{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Unknown error.")})).then((function(t){e.setState({imageList:t})}))}},{key:"componentDidMount",value:function(){this.updateConfigmap(),this.updateImages()}},{key:"componentDidUpdate",value:function(){this.updateImages()}},{key:"postChange",value:function(e){var t=JSON.stringify({last_selected_image:e.target.text});fetch("/api/user/"+this.props.username+"/configmap",{method:"POST",body:t,headers:{"Content-Type":"application/json"}}),console.log("Sent chosen image:",t),this.updateConfigmap()}},{key:"DropdownValue",value:function(){return null!=this.state.selectedValue&&""!=this.state.selectedValue?this.state.selectedValue:0!=this.state.imageList.length?this.state.imageList[0]:"No images available"}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,{as:g.a},r.a.createElement(v.a.Toggle,{as:this.CustomToggle,id:"dropdown-image"},this.DropdownValue()),r.a.createElement(v.a.Menu,{className:"ImageMenu"},this.state.imageList.map((function(t,a){return r.a.createElement(v.a.Item,{onClick:function(t){return e.postChange(t)},eventKey:a.toString()},t)}))))," ")))}}]),a}(r.a.Component)),S=a(58),C=a(54),b=(a(71),a(50)),w=a(51),N=a(28),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={envvars:{},items:[]},n}return Object(c.a)(a,[{key:"updateVars",value:function(){var e=this;fetch("/api/user/"+this.props.username+"/configmap",{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch user cm")})).then((function(t){e.setState({envvars:t.env}),e.renderForms()}))}},{key:"componentDidMount",value:function(){this.updateVars()}},{key:"onBlur",value:function(e){for(var t={},a=document.getElementById("container").children,n=0;n<a.length;n++){var r=a[n].children[0];r.value?r.nextSibling.value?t[r.value]=r.nextSibling.value:t[r.value]=r.nextSibling.placeholder:r.nextSibling.value?t[r.placeholder]=r.nextSibling.value:t[r.placeholder]=r.nextSibling.placeholder}this.setState({envvars:t},(function(){this.sendVars()}))}},{key:"removeForm",value:function(e){e.target.parentElement.remove(),this.onBlur()}},{key:"addForm",value:function(e){var t=this,a=[r.a.createElement(N.a,{className:"InnerGap",name:"key",type:"text",placeholder:"key",onBlur:function(e){return t.onBlur(e)}}),r.a.createElement(N.a,{className:"InnerGap",type:"text",placeholder:"value",onBlur:function(e){return t.onBlur(e)}}),r.a.createElement(E.a,{className:"InnerGap",variant:"danger",onClick:function(e){return t.removeForm(e)}},"Remove")];this.setState((function(e){return{items:[].concat(Object(C.a)(e.items),[a])}}))}},{key:"renderForms",value:function(){var e=this;console.log("Logging envvars:",this.state.envvars);for(var t=function(){var t=Object(S.a)(n[a],2),o=t[0],i=t[1],s=[r.a.createElement(N.a,{className:"InnerGap",name:"key",type:"text",placeholder:o,onBlur:function(t){return e.onBlur(t)}}),r.a.createElement(N.a,{className:"InnerGap",type:"text",placeholder:i,onBlur:function(t){return e.onBlur(t)}}),r.a.createElement(E.a,{className:"InnerGap",variant:"danger",onClick:function(t){return e.removeForm(t)}},"Remove")];e.setState((function(e){return{items:[].concat(Object(C.a)(e.items),[s])}}))},a=0,n=Object.entries(this.state.envvars);a<n.length;a++)t()}},{key:"sendVars",value:function(){var e=JSON.stringify({env:this.state.envvars});fetch("/api/user/"+this.props.username+"/configmap",{method:"POST",body:e,headers:{"Content-Type":"application/json"}}),console.log("Sent EnvVars:",e)}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{defaultActiveKey:"0"},r.a.createElement(w.a,null,r.a.createElement(b.a.Toggle,{className:"EnvVarForm",as:w.a.Header,eventKey:"0"},"Environment Variables:"),r.a.createElement(b.a.Collapse,{eventKey:"0"},r.a.createElement(w.a.Body,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{id:"container"},this.state.items.map((function(e){return r.a.createElement(h.a.Row,{className:"RowGap"},e)}))),r.a.createElement(E.a,{variant:"primary",onClick:function(t){return e.addForm(t)}},"Add"))))))}}]),a}(r.a.Component),z=(a(72),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={gpu_value:0},n}return Object(c.a)(a,[{key:"updateGpu",value:function(){var e=this;fetch("/api/user/"+this.props.username+"/configmap",{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch user cm")})).then((function(t){e.setState({gpu_value:t.gpu})}))}},{key:"componentDidMount",value:function(){this.updateGpu()}},{key:"postChange",value:function(e){if(0!==e.target.value.length){var t={gpu:parseInt(e.target.value)},a=JSON.stringify(t);fetch("/api/user/"+this.props.username+"/configmap",{method:"POST",body:a,headers:{"Content-Type":"application/json"}}),console.log("GPU value sent:",a)}}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,null,r.a.createElement(h.a.Control,{className:"GpuForm",type:"text",placeholder:this.state.gpu_value,onChange:function(t){return e.postChange(t)}}))}}]),a}(r.a.Component)),O=(a(73),a(37));s._USERNAME="mroman",s._IMAGE="";var G=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O.a,{bg:"danger",variant:"dark",sticky:"top",expand:"lg"},r.a.createElement(O.a.Brand,{href:"#home"},"Jupyterhub Spawner"),r.a.createElement(O.a.Collapse,{className:"justify-content-end"},r.a.createElement(O.a.Text,null,"Signed in as: ",s._USERNAME))),r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"Grid"},r.a.createElement("h3",{className:"Wide"},"JupyterHub Server Image"),r.a.createElement(k,{image:s._IMAGE,username:s._USERNAME})),r.a.createElement("h3",{className:"Wide"},"Deployment size:"),r.a.createElement("div",null,r.a.createElement("div",{className:"Grid"},r.a.createElement("h3",{className:"Wide"},"Container size:"),r.a.createElement(y,{username:s._USERNAME})),r.a.createElement("div",{className:"Grid"},r.a.createElement("h3",{className:"Wide"},"GPU:"),r.a.createElement(z,{username:s._USERNAME}))),r.a.createElement(j,{username:s._USERNAME})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.c4de81c0.chunk.js.map